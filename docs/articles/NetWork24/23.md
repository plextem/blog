# [$23.$火星探险问题](https://www.luogu.org/problemnew/show/P3356)

## 题目

火星探险队的登陆舱将在火星表面着陆，登陆舱内有多部障碍物探测车。登陆舱着陆后，探测车将离开登陆舱向先期到达的传送器方向移动。探测车在移动中还必须采集岩石标本。每一块岩石标本由最先遇到它的探测车完成采集。每块岩石标本只能被采集一次。岩石标本被采集后，其他探测车可以从原来岩石标本所在处通过。探测车不能通过有障碍的地面。本题限定探测车只能从登陆处沿着向南或向东的方向朝传送器移动，而且多个探测车可以在同一时间占据同一位置。如果某个探测车在到达传送器以前不能继续前进，则该车所采集的岩石标本将全部损失。

用一个$P\times Q$网格表示登陆舱与传送器之间的位置。登陆舱的位置在$(X1,Y1)$处，传送器
的位置在$(X_P ,Y_Q)$处。

X 1,Y 1 X 2 , Y 1 X 3 , Y 1 ... X P-1, Y 1 X P , Y 1

X 1,Y 2 X 2 , Y 2 X 3 , Y 2 ... X P-1, Y 2 X P , Y 2

X 1, Y 3 X 2 , Y 3 X 3 ,Y 3 ... X P-1, Y 3 X P , Y 3

... ...

X 1 ,Y Q-1 X 2 , Y Q-1 X 3 , Y Q-1 ... X P-1, Y Q-1 X P , Y Q-1

X 1,Y Q X 2 , Y Q X 3 , Y Q ... X P-1, Y Q X P ,Y Q

给定每个位置的状态，计算探测车的最优移动方案，使到达传送器的探测车的数量最多，
而且探测车采集到的岩石标本的数量最多。

## 题解

和深海机器人十分相像，就不具体说方法了。

输出方法就是：

对于每个点向右边和下面搜索可以取的点，即该点和那个点之间的连边的反边有流量，然后就走过去，$dfs$的开始点都是$(1,1)$，只要$K$遍就行，注意走过一条边后要把反边流量$-1$.